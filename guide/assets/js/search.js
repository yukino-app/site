document.addEventListener("DOMContentLoaded",(async()=>{const e=document.getElementById("search-input"),t=document.getElementById("search-results-container"),n=document.getElementById("search-results"),s=[];(await fetch("/guide/api.json").then((e=>e.json()))).posts.forEach((e=>{s.push({title:e.title,url:e.url}),e.toc.forEach((e=>{s.push({title:e.title,url:e.url})}))}));const l=new Fuse(s,{includeScore:!0,keys:["title"]});["input"].forEach((s=>e.addEventListener(s,(s=>{s.stopPropagation(),t.style.display="none",n.innerHTML="";const o=e.value;if(!o.length)return;const r=l.search(o);r.length&&(t.style.display="flex",r.sort(((e,t)=>e.score-t.score)).forEach((({item:e},t)=>{n.innerHTML+=`<a href="${e.url}" style="display: block; color: var(--light);"><span style="opacity: 0.7;">${t+1}.</span> ${e.title}</a>`})))}))))}));