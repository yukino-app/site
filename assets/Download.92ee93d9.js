var M=Object.defineProperty;var L=(n,t,e)=>t in n?M(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var j=(n,t,e)=>(L(n,typeof t!="symbol"?t+"":t,e),e);import{d as O,o,b as a,h as r,t as l,M as N,N as F,g as S,O as P,P as z,r as A,i as w,k as g,F as x,j as v,Q as k,R as B,f as y}from"./vendor.d619cb3d.js";import{U as C}from"./index.e1b7a9fc.js";const R={class:"text-center"},U={class:"font-bold text-3xl"},I=O({props:{title:{type:String,required:!0}},setup(n){return(t,e)=>(o(),a("div",R,[r("h1",U,l(n.title),1)]))}}),$=class{constructor(t){this.commits=t}static tryParse(t){try{if(t){const e=JSON.parse(t);return new $(e.commits)}}catch(e){}}};let b=$;j(b,"styles",{feat:{title:"Features",color:"bg-green-500"},refactor:{title:"Changes",color:"bg-yellow-500"},fix:{title:"Bug Fixes",color:"bg-red-500"},perf:{title:"Improvements",color:"bg-purple-400"}});const V={Android:"Android","like Mac":"iOS",Win:"Windows",Mac:"MacOS",Linux:"Linux"},D=()=>{for(const[n,t]of Object.entries(V))if(navigator.userAgent.includes(n))return t},E=n=>{const[t,e]=n.split("-").splice(-1)[0].split(".");let s,i,d,u=t;switch(e){case"zip":s="Archive",i="archive";break;default:s="Setup",i="box-open";break}switch(t){case"windows":d="Windows";break;case"linux":d="Linux";break;case"android":d="Android";break;case"macos":d="MacOS",u="apple";break;case"ios":d="iOS",u="apple";break;default:throw new Error("Unknown Platform")}return{name:s,platform:{name:d,icon:u},format:e,icon:i}},T=async n=>{var _;let t;switch(n){case"latest":t="latest";break;default:t=`tags/${n}`;break}const e=await fetch(`${C.releasesCdn}/${t}`);if(e.status!=200)throw new Error(`Failed with status code ${e.status}${e.statusText.length?` (${e.statusText})`:""}`);const s=await e.json(),i={};for(const m of s.assets){const c=E(m.name);i[c.platform.name]||(i[c.platform.name]={name:c.platform.name,icon:c.platform.icon,files:[]}),i[c.platform.name].files.push({name:c.name,format:c.format,size:m.size,url:m.browser_download_url,icon:c.icon})}const d=D(),u=(_=s.body.match(/<!-- changelogs: ({.*}) -->/))==null?void 0:_[1];return{version:s.tag_name,changelogs:b.tryParse(u),releaseURL:s.html_url,platforms:Object.values(i).sort((m,c)=>m.name===d?-1:0)}},W={class:"wx wy"},J={key:0,class:"text-center text-sm text-gray-700 dark:text-gray-400"},q={key:1,class:"mt-4 text-center text-sm text-red-500"},Q={key:2,class:"mt-4 text-center text-sm text-gray-500"},G={key:3,class:"mt-10"},H={key:0,class:"bg-gray-100 dark:bg-gray-800 px-4 py-3 rounded flex flex-col gap-4"},K={class:"flex-grow"},X={key:0},Y={class:"list-disc ml-7"},Z={class:"mb-1"},tt={key:0,class:"underline"},et=["href"],st=y(") "),ot={class:"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8"},at={class:"bg-gradient-to-br from-indigo-500 via-purple-500 to-purple-500 text-white px-6 py-4 rounded-md text-center"},nt={class:"flex justify-center items-center gap-6"},rt={class:"text-3xl"},ct={class:"text-2xl font-bold"},it={class:"mt-4 flex flex-col md:flex-row justify-center items-center gap-3"},lt=["href"],dt={class:"text-xl"},mt={class:"text-sm"},ut={class:"text-xs"},pt={class:"text-xs"},gt=O({setup(n){const t=N(),e=F(),s=S(null),i=S(),d=P(()=>{var _;return((_=s.value)==null?void 0:_.changelogs)?Object.entries(s.value.changelogs.commits).filter(([m,c])=>c.length):null}),u=b.styles;return z(async()=>{if(typeof t.params.version!="string"){i.value="Unknown version";return}try{s.value=await T(t.params.version),await e.replace(`/download/${s.value.version}/`)}catch(m){i.value=`Something went wrong: ${m}`}}),(_,m)=>{const c=A("Icon");return o(),a("div",W,[w(I,{title:"Download"}),s.value?(o(),a("p",J,l(s.value.version),1)):g("",!0),i.value?(o(),a("p",q,l(i.value),1)):s.value?(o(),a("div",G,[s.value.changelogs&&Object.values(s.value.changelogs.commits).some(p=>p.length!=0)?(o(),a("div",H,[(o(!0),a(x,null,v(k(d),([p,f])=>(o(),a("div",K,[f.length?(o(),a("div",X,[r("p",{class:B(["text-white font-bold mb-1 rounded inline-block px-1.5 py-0.5 text-sm",k(u)[p].color])},l(k(u)[p].title),3),r("ul",Y,[(o(!0),a(x,null,v(f,h=>(o(),a("li",Z,[r("p",null,[h.commit.cat?(o(),a("span",tt,l(h.commit.cat)+":",1)):g("",!0),y(" "+l(h.commit.msg)+" (",1),r("a",{href:h.commit.url},l(h.commit.sha),9,et),st])]))),256))])])):g("",!0)]))),256))])):g("",!0),r("div",ot,[(o(!0),a(x,null,v(s.value.platforms,p=>(o(),a("div",at,[r("div",nt,[r("p",rt,[w(c,{icon:["fab",p.icon]},null,8,["icon"])]),r("p",ct,l(p.name),1)]),r("div",it,[(o(!0),a(x,null,v(p.files,f=>(o(),a("a",{class:"transition duration-200 hover:-translate-y-1 bg-white px-3 py-1 rounded text-indigo-500 dark:text-indigo-500 hover:text-indigo-500 dark:hover:text-indigo-500 flex justify-center items-center gap-3",href:f.url},[r("div",dt,[w(c,{icon:f.icon},null,8,["icon"])]),r("div",null,[r("p",mt,[y(l(f.name)+" ",1),r("span",ut,"("+l(f.format)+")",1)]),r("p",pt,l((f.size/1024/1024).toFixed(1))+" MB ",1)])],8,lt))),256))])]))),256))])])):(o(),a("p",Q," Loading... "))])}}});export{gt as default};
